var t="5.14.1".split(".")[0],e={local:{staticPath:"PATH_TO_LOCAL_FILES",eventCollector:"https://europe-west2-tech-microservices-staging.cloudfunctions.net/batch-event-collector",offers:"https://staging-offers.igms.io/api/v1/"},staging:{staticPath:"https://static-staging.igms.io/audience-tracking/v"+t+"/",eventCollector:"https://europe-west2-tech-microservices-staging.cloudfunctions.net/batch-event-collector",offers:"https://staging-offers.igms.io/api/v1/"},prod:{staticPath:"https://static.igms.io/audience-tracking/v"+t+"/",eventCollector:"https://europe-west2-tech-microservices-production.cloudfunctions.net/batch-event-collector",offers:"https://offers.igms.io/api/v1/"}};onmessage=function(t){var s=t.data;(function(t,s){return void 0===s&&(s="prod"),new Promise(function(o,n){var c=new XMLHttpRequest;c.open("POST",e[s].eventCollector),c.setRequestHeader("Content-Type","application/json"),c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status||304===c.status?o(c.responseText):n(c.responseText))},c.send(JSON.stringify({events:t}))})})(s[0],s[1]).then(function(t){return postMessage({success:!0,response:t})}).catch(function(t){return postMessage({success:!1,error:t})})};
